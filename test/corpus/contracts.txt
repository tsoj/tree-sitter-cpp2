===========================================================
Precondition and postcondition examples
===========================================================

insert_at: (container, where: int, val: int)
    pre<bounds_safety>( 0 <= where <= container.ssize(), "position (where)$ is outside 'container'" )
    post              ( container.ssize() == container.ssize()$ + 1 )
= {
    _ = container.insert( container.begin()+where, val );
}

-----------------------------------------------------------

(cpp2_source_file
  (cpp2_declaration
    (cpp2_cpp2_block_cpp2_declaration
      (cpp2_declaration_left_side
        (cpp2_non_cpp2_template_identifier
          (cpp2_ordinary_identifier)))
      (cpp2_cpp2_block_cpp2_definition
        (cpp2_left_side_of_cpp2_definition
          (cpp2_type
            (cpp2_function_cpp2_type
              (cpp2_function_cpp2_type_without_return_cpp2_type
                (cpp2_comma_seperated_cpp2_declarations
                  (cpp2_function_declaration_argument
                    (cpp2_any_identifier
                      (cpp2_no_namespace_identifier
                        (cpp2_non_cpp2_template_identifier
                          (cpp2_ordinary_identifier)))))
                  (cpp2_function_declaration_argument
                    (cpp2_declaration
                      (cpp2_no_cpp2_definition_cpp2_declaration
                        (cpp2_declaration_left_side
                          (cpp2_non_cpp2_template_identifier
                            (cpp2_ordinary_identifier)))
                        (cpp2_type
                          (cpp2_expression
                            (cpp2_any_identifier
                              (cpp2_no_namespace_identifier
                                (cpp2_non_cpp2_template_identifier
                                  (cpp2_ordinary_identifier)))))))))
                  (cpp2_function_declaration_argument
                    (cpp2_declaration
                      (cpp2_no_cpp2_definition_cpp2_declaration
                        (cpp2_declaration_left_side
                          (cpp2_non_cpp2_template_identifier
                            (cpp2_ordinary_identifier)))
                        (cpp2_type
                          (cpp2_expression
                            (cpp2_any_identifier
                              (cpp2_no_namespace_identifier
                                (cpp2_non_cpp2_template_identifier
                                  (cpp2_ordinary_identifier)))))))))))))
          (cpp2_template_call_arguments
            (cpp2_expression_or_cpp2_comma_cpp2_expressions
              (cpp2_expression
                (cpp2_any_identifier
                  (cpp2_no_namespace_identifier
                    (cpp2_non_cpp2_template_identifier
                      (cpp2_ordinary_identifier)))))))
          (cpp2_parentheses_cpp2_expression
            (cpp2_expression_or_cpp2_comma_cpp2_expressions
              (cpp2_comma_cpp2_expressions
                (cpp2_expression
                  (cpp2_binary_cpp2_expression
                    (cpp2_expression
                      (cpp2_literal
                        (cpp2_number)))
                    (cpp2_expression
                      (cpp2_binary_cpp2_expression
                        (cpp2_expression
                          (cpp2_any_identifier
                            (cpp2_no_namespace_identifier
                              (cpp2_non_cpp2_template_identifier
                                (cpp2_ordinary_identifier)))))
                        (cpp2_expression
                          (cpp2_method_call
                            (cpp2_expression
                              (cpp2_any_identifier
                                (cpp2_no_namespace_identifier
                                  (cpp2_non_cpp2_template_identifier
                                    (cpp2_ordinary_identifier)))))
                            (cpp2_any_identifier
                              (cpp2_no_namespace_identifier
                                (cpp2_non_cpp2_template_identifier
                                  (cpp2_ordinary_identifier))))
                            (cpp2_parentheses_cpp2_expression)))))))
                (cpp2_expression_or_cpp2_comma_cpp2_expressions
                  (cpp2_expression
                    (cpp2_literal
                      (cpp2_string)))))))
          (cpp2_parentheses_cpp2_expression
            (cpp2_expression_or_cpp2_comma_cpp2_expressions
              (cpp2_expression
                (cpp2_binary_cpp2_expression
                  (cpp2_expression
                    (cpp2_method_call
                      (cpp2_expression
                        (cpp2_any_identifier
                          (cpp2_no_namespace_identifier
                            (cpp2_non_cpp2_template_identifier
                              (cpp2_ordinary_identifier)))))
                      (cpp2_any_identifier
                        (cpp2_no_namespace_identifier
                          (cpp2_non_cpp2_template_identifier
                            (cpp2_ordinary_identifier))))
                      (cpp2_parentheses_cpp2_expression)))
                  (cpp2_expression
                    (cpp2_binary_cpp2_expression
                      (cpp2_expression
                        (cpp2_unary_cpp2_expression
                          (cpp2_unary_postfix_cpp2_expression
                            (cpp2_expression
                              (cpp2_method_call
                                (cpp2_expression
                                  (cpp2_any_identifier
                                    (cpp2_no_namespace_identifier
                                      (cpp2_non_cpp2_template_identifier
                                        (cpp2_ordinary_identifier)))))
                                (cpp2_any_identifier
                                  (cpp2_no_namespace_identifier
                                    (cpp2_non_cpp2_template_identifier
                                      (cpp2_ordinary_identifier))))
                                (cpp2_parentheses_cpp2_expression))))))
                      (cpp2_expression
                        (cpp2_literal
                          (cpp2_number))))))))))
        (cpp2_block
          (cpp2_statement
            (cpp2_non_cpp2_cpp2_block_cpp2_statement
              (cpp2_expression
                (cpp2_binary_cpp2_expression
                  (cpp2_expression
                    (cpp2_any_identifier
                      (cpp2_no_namespace_identifier
                        (cpp2_non_cpp2_template_identifier
                          (cpp2_ordinary_identifier)))))
                  (cpp2_expression
                    (cpp2_method_call
                      (cpp2_expression
                        (cpp2_any_identifier
                          (cpp2_no_namespace_identifier
                            (cpp2_non_cpp2_template_identifier
                              (cpp2_ordinary_identifier)))))
                      (cpp2_any_identifier
                        (cpp2_no_namespace_identifier
                          (cpp2_non_cpp2_template_identifier
                            (cpp2_ordinary_identifier))))
                      (cpp2_parentheses_cpp2_expression
                        (cpp2_expression_or_cpp2_comma_cpp2_expressions
                          (cpp2_comma_cpp2_expressions
                            (cpp2_expression
                              (cpp2_binary_cpp2_expression
                                (cpp2_expression
                                  (cpp2_method_call
                                    (cpp2_expression
                                      (cpp2_any_identifier
                                        (cpp2_no_namespace_identifier
                                          (cpp2_non_cpp2_template_identifier
                                            (cpp2_ordinary_identifier)))))
                                    (cpp2_any_identifier
                                      (cpp2_no_namespace_identifier
                                        (cpp2_non_cpp2_template_identifier
                                          (cpp2_ordinary_identifier))))
                                    (cpp2_parentheses_cpp2_expression)))
                                (cpp2_expression
                                  (cpp2_any_identifier
                                    (cpp2_no_namespace_identifier
                                      (cpp2_non_cpp2_template_identifier
                                        (cpp2_ordinary_identifier)))))))
                            (cpp2_expression_or_cpp2_comma_cpp2_expressions
                              (cpp2_expression
                                (cpp2_any_identifier
                                  (cpp2_no_namespace_identifier
                                    (cpp2_non_cpp2_template_identifier
                                      (cpp2_ordinary_identifier))))))))))))))))))))

===========================================================
Example of using 'this' as a contract group
===========================================================

function_declaration: @copyable type =
{
    add_initializer: (inout this, source: std::string_view)
        pre<this> (!has_initializer(), "cannot add an initializer to a function that already has one")
        pre<this> (parent_is_type(),   "cannot add an initializer to a function that isn't in a type scope")
    = { print("hello"); }
}

-----------------------------------------------------------

(cpp2_source_file
  (cpp2_declaration
    (cpp2_cpp2_block_cpp2_declaration
      (cpp2_declaration_left_side
        (cpp2_non_cpp2_template_identifier
          (cpp2_ordinary_identifier)))
      (cpp2_cpp2_block_cpp2_definition
        (cpp2_left_side_of_cpp2_definition
          (cpp2_metafunction_arguments
            (cpp2_any_identifier
              (cpp2_no_namespace_identifier
                (cpp2_non_cpp2_template_identifier
                  (cpp2_ordinary_identifier)))))
          (cpp2_type
            (cpp2_expression
              (cpp2_any_identifier
                (cpp2_no_namespace_identifier
                  (cpp2_non_cpp2_template_identifier
                    (cpp2_ordinary_identifier)))))))
        (cpp2_block
          (cpp2_statement
            (cpp2_cpp2_block_cpp2_statement
              (cpp2_cpp2_block_cpp2_declaration
                (cpp2_declaration_left_side
                  (cpp2_non_cpp2_template_identifier
                    (cpp2_ordinary_identifier)))
                (cpp2_cpp2_block_cpp2_definition
                  (cpp2_left_side_of_cpp2_definition
                    (cpp2_type
                      (cpp2_function_cpp2_type
                        (cpp2_function_cpp2_type_without_return_cpp2_type
                          (cpp2_comma_seperated_cpp2_declarations
                            (cpp2_function_declaration_argument
                              (cpp2_passing_style)
                              (cpp2_any_identifier
                                (cpp2_no_namespace_identifier
                                  (cpp2_non_cpp2_template_identifier
                                    (cpp2_ordinary_identifier)))))
                            (cpp2_function_declaration_argument
                              (cpp2_declaration
                                (cpp2_no_cpp2_definition_cpp2_declaration
                                  (cpp2_declaration_left_side
                                    (cpp2_non_cpp2_template_identifier
                                      (cpp2_ordinary_identifier)))
                                  (cpp2_type
                                    (cpp2_expression
                                      (cpp2_any_identifier
                                        (cpp2_namespaced_identifier
                                          (cpp2_no_namespace_identifier
                                            (cpp2_non_cpp2_template_identifier
                                              (cpp2_ordinary_identifier)))
                                          (cpp2_no_namespace_identifier
                                            (cpp2_non_cpp2_template_identifier
                                              (cpp2_ordinary_identifier))))))))))))))
                    (cpp2_template_call_arguments
                      (cpp2_expression_or_cpp2_comma_cpp2_expressions
                        (cpp2_expression
                          (cpp2_any_identifier
                            (cpp2_no_namespace_identifier
                              (cpp2_non_cpp2_template_identifier
                                (cpp2_ordinary_identifier)))))))
                    (cpp2_parentheses_cpp2_expression
                      (cpp2_expression_or_cpp2_comma_cpp2_expressions
                        (cpp2_comma_cpp2_expressions
                          (cpp2_expression
                            (cpp2_unary_cpp2_expression
                              (cpp2_unary_prefix_cpp2_expression
                                (cpp2_expression
                                  (cpp2_function_call
                                    (cpp2_expression
                                      (cpp2_any_identifier
                                        (cpp2_no_namespace_identifier
                                          (cpp2_non_cpp2_template_identifier
                                            (cpp2_ordinary_identifier)))))
                                    (cpp2_parentheses_cpp2_expression))))))
                          (cpp2_expression_or_cpp2_comma_cpp2_expressions
                            (cpp2_expression
                              (cpp2_literal
                                (cpp2_string)))))))
                    (cpp2_template_call_arguments
                      (cpp2_expression_or_cpp2_comma_cpp2_expressions
                        (cpp2_expression
                          (cpp2_any_identifier
                            (cpp2_no_namespace_identifier
                              (cpp2_non_cpp2_template_identifier
                                (cpp2_ordinary_identifier)))))))
                    (cpp2_parentheses_cpp2_expression
                      (cpp2_expression_or_cpp2_comma_cpp2_expressions
                        (cpp2_comma_cpp2_expressions
                          (cpp2_expression
                            (cpp2_function_call
                              (cpp2_expression
                                (cpp2_any_identifier
                                  (cpp2_no_namespace_identifier
                                    (cpp2_non_cpp2_template_identifier
                                      (cpp2_ordinary_identifier)))))
                              (cpp2_parentheses_cpp2_expression)))
                          (cpp2_expression_or_cpp2_comma_cpp2_expressions
                            (cpp2_expression
                              (cpp2_literal
                                (cpp2_string))))))))
                  (cpp2_block
                    (cpp2_statement
                      (cpp2_non_cpp2_cpp2_block_cpp2_statement
                        (cpp2_expression
                          (cpp2_function_call
                            (cpp2_expression
                              (cpp2_any_identifier
                                (cpp2_no_namespace_identifier
                                  (cpp2_non_cpp2_template_identifier
                                    (cpp2_ordinary_identifier)))))
                            (cpp2_parentheses_cpp2_expression
                              (cpp2_expression_or_cpp2_comma_cpp2_expressions
                                (cpp2_expression
                                  (cpp2_literal
                                    (cpp2_string)))))))))))))))))))
